spring.application.name=EIPplatform

server.port=7000
#100.108.73.3 IP server
spring.datasource.url=jdbc:sqlserver://10.10.115.20;databaseName=eip_doanh_test;encrypt=false;trustServerCertificate=true;sendTimeAsDateTime=false
spring.datasource.username=example
spring.datasource.password=123456789
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver
# spring.datasource.url=jdbc:mysql://127.0.0.1:3306/eip_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Ho_Chi_Minh
# spring.datasource.username=eip_user
# spring.datasource.password=EipPass123!
# spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver


# CONNECTION POOL OPTIMIZATION (HikariCP is default in Spring Boot 2.x+)
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.validation-timeout=3000
spring.datasource.hikari.leak-detection-threshold=60000

# JPA/HIBERNATE OPTIMIZATIONS
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false


# CRITICAL PERFORMANCE SETTINGS
spring.jpa.properties.hibernate.jdbc.batch_size=500
spring.jpa.properties.hibernate.jdbc.fetch_size=25
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# LAZY LOADING AND QUERY OPTIMIZATIONS
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false
spring.jpa.properties.hibernate.default_batch_fetch_size=16

# STATISTICS AND MONITORING (disable in production for better performance)
spring.jpa.properties.hibernate.generate_statistics=false

spring.main.allow-bean-definition-overriding=true

#timezone
spring.jackson.time-zone=Asia/Ho_Chi_Minh
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Ho_Chi_Minh

# Audit
audit.queue.capacity=10000
audit.batch.size=10
audit.retry.max-attempts=3
audit.retry.delay-ms=1000
audit.flush.interval-ms=5000

#Security
jwt.accessSignerKey:aOe/78kX5k1yZ5Ytw5pGRz4qJ90No3hcuZ7mr/jgEyNV2YVuN/ChQdvfcBNungjHRSWd5lEAfXJVf1dFOuWkeQ==
jwt.refreshSignerKey:IH2lqP0EGSa//UGObOEJT8k8ZLBb60F6hRflkaTc6Ug0EJAdfFj4BQphk2R609XQw0Q9lVlr5U0qEc2VZWp3EA==
jwt.accessToken:86400
jwt.refreshToken:172800
JavaMailSender
aes.encryptJWT:YisltazxHBddDxOgMheZjr7sbgNBh27B9DEqFiupMaA=
# Email configuration
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=i4.0@eiu.edu.vn
spring.mail.password=wsdmqpvptgqnxzfo
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# File Storage
app.storage.local.upload-dir=${UPLOAD_DIR:/app/uploads}
spring.servlet.multipart.max-file-size=10MB

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=60000


# Redis – dùng 127.0.0.1 vì cùng host
# spring.data.redis.host=127.0.0.1
# spring.data.redis.port=6379
# spring.data.redis.password=RedisEIP2025!@#Strong   # đổi thành pass mạnh như mình gợi ý
# spring.data.redis.timeout=60000
# spring.data.redis.lettuce.pool.max-active=20
# spring.data.redis.lettuce.pool.max-idle=10

# ------------------------ Rate Limiting ------------------------


app.rate-limit.enabled=false
app.rate-limit.default-rule=default

# Authentication endpoints - Prevent brute force attacks
app.rate-limit.rules.auth.max-requests=5
app.rate-limit.rules.auth.window=PT1M
app.rate-limit.rules.auth.description=Authentication endpoints - Brute force protection

# Session management - Prevent session hijacking attempts
app.rate-limit.rules.session.max-requests=20
app.rate-limit.rules.session.window=PT1M
app.rate-limit.rules.session.description=Session and token operations - Security protection

# Default rule for general API access
app.rate-limit.rules.default.max-requests=1000
app.rate-limit.rules.default.window=PT1H
app.rate-limit.rules.default.description=General API access - Conservative security limit

# ------------------------ Rate Limiting ------------------------
